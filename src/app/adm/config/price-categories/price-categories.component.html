<div>
  <ng-container>
    <div class="d-flex justify-content-between">
      <h3>Categorias de precificação</h3>
      <button class="btn btn-outline-success" (click)="newPriceCategory()">Novo Produto</button>
    </div>
    <section class="mt-3" *ngIf="isPriceCategoryCreate">
      <form class="d-flex justify-content-between" [formGroup]="formPriceCategory">
        <div class="gap">
          <label for="name" class="form-label">Nome:</label>
          <input
            class="form-control"
            type="text"
            id="name"
            formControlName="name"
            placeholder="Nome da Categoria"
          >
        </div>
        <div class="gap">
          <label for="profitMargin" class="form-label">Percentual sobre base:</label>
          <input
            class="form-control"
            type="text"
            id="profitMargin"
            formControlName="profitMargin"
            placeholder="x %"
          >
        </div>
        <div class="gap">
          <label for="description" class="form-label">Descrição:</label>
          <input
            class="form-control"
            type="text"
            id="description"
            formControlName="description"
            placeholder="Muito barato"
          >
        </div>
        <button
          class="btn btn-outline-success btn-width"
          (click)="createPriceCategory(formPriceCategory)"
          > Salvar
        </button>
      </form>
    </section>
  </ng-container>
  <ng-container *ngFor="let priceCategory of formPriceCategoryList; let i = index">
    <form [formGroup]="priceCategory">
      <section class="mt-2 d-flex justify-content-between">
        <div>
          <label for="name" class="form-label"></label>
          <input
          type="text"
          id="name"
          formControlName="name"
          [ngClass]="priceCategory.controls['priceCategoryEdit'].value? 'form-control': 'form-control-plaintext'">
        </div>
        <div class="gap">
          <label for="profitMargin" class="form-label">Percentual sobre base:</label>
          <input
            [ngClass]="priceCategory.controls['priceCategoryEdit'].value? 'form-control': 'form-control-plaintext'"
            type="text"
            id="profitMargin"
            formControlName="profitMargin"
            placeholder="x %"
          >
        </div>
        <div class="gap">
          <label for="description" class="form-label">Descrição:</label>
          <input
            [ngClass]="priceCategory.controls['priceCategoryEdit'].value? 'form-control': 'form-control-plaintext'"
            type="text"
            id="description"
            formControlName="description"
            placeholder="Muito barato"
          >
        </div>
        <div class="d-flex gap">
          <button *ngIf="priceCategory.controls['priceCategoryEdit'].value" class="btn btn-outline-success" (click)="updateCategory(priceCategory)">Salvar</button>
          <button class="btn btn-width btn-outline-warning" (click)="editPriceCategory(i)">Editar</button>
          <button class="btn btn-width btn-outline-danger" (click)="deletePriceCategory(priceCategory)">Remover</button>
        </div>
      </section>
    </form>
  </ng-container>
</div>

